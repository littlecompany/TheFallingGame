<!DOCTYPE HTML>
<head>
	<script src="/socket.io/socket.io.js"></script>
	<script>
	  var socket = io.connect('http://localhost');
	  socket.on('news', function (data) {
	    console.log('received message from server - ' ,data);
	    socket.emit('my other event', { my: 'data' });
    });
    	socket.on('map', function(data) {
		var c=document.getElementById("myCanvas");
		var ctx=c.getContext("2d");
		var imageData = ctx.createImageData(data["xl"], data["yl"]);
		var index = 0
		for(var x = 0; x < data["xl"]; x++) {
			for(var y = 0; y < data["yl"]; y++) {
				var col = 255 * data["map"][(x * data["yl"]) + y]
				col = Math.floor(col);
				imageData.data[index] = col;
				imageData.data[index + 1] = col;
				imageData.data[index + 2] = col;
				imageData.data[index + 3] = col;
				index += 4;
			}
		}
		ctx.putImageData(imageData, 0, 0);
	});
	</script>
</head>
<body>
	asdf
	<canvas id="myCanvas" width="1000" height="1000">
	</canvas>
</body>
